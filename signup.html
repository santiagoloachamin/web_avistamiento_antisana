<!doctype html>

<html   lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Reserva Ecologica Antisana</title>
    <link rel="icon" href="assets/img/favicon.png">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">

</head>

<body class="accounts">
    <div class="preloader-main">
        <div class="preloader-wapper">
            <svg class="preloader" xmlns="http://www.w3.org/2000/svg" version="1.1" width="600" height="200">
                <defs>
                    <filter id="goo" x="-40%" y="-40%" height="200%" width="400%">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -8" result="goo" />
                    </filter>
                </defs>
                <g filter="url(#goo)">
                    <circle class="dot" cx="50" cy="50" r="25" fill="#8731E8" />
                    <circle class="dot" cx="50" cy="50" r="25" fill="#8731E8" />
                </g>
            </svg>
            <div>
                <div class="loader-section section-left"></div>
                <div class="loader-section section-right"></div>
            </div>
        </div>
    </div>

    <div id="scrollUp" title="Scroll To Top">
        <i class="fas fa-arrow-up"></i>
    </div>
    <div class="main">
        <!-- ***** Header Start ***** -->
        <header class="navbar navbar-sticky navbar-expand-lg navbar-dark">
            <div class="container position-relative">
                <a class="navbar-brand" href="index.html">
                    <img class="navbar-brand-regular" src="assets/img/logo/logo-white.png" alt="brand-logo">
                    <img class="navbar-brand-sticky" src="assets/img/logo/logo.png" alt="sticky brand-logo">
                </a>
                <button class="navbar-toggler d-lg-none" type="button" data-toggle="navbarToggler" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="navbar-inner">
                    <button class="navbar-toggler d-lg-none" type="button" data-toggle="navbarToggler" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <nav>
                        <ul class="navbar-nav" id="navbar-nav">
                            <li class="nav-item">
                                <a class="dropdown-item" href="./index.html">Inicio</a>
                            </li>
                            <li class="nav-item">
                                <a class="dropdown-item" href="./login.html">Iniciar sesión</a>
                            </li>    
                            <li class="nav-item">
                                <a class="dropdown-item" href="./contact.html">Contacto</a>
                            </li>                          
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <section id="home" class="section welcome-area bg-overlay d-flex align-items-center">
            <div class="container">
                <div class="row align-items-center justify-content-center">
           
                    <div class="col-12 col-md-8 col-lg-5">
                        <div class="contact-box bg-white text-center rounded p-4 p-sm-5 mt-5 mt-lg-0 shadow-lg">
                                <div class="contact-top">
                                    <h3 class="contact-title">Registrarme</h3>
                                    <h5 class="text-secondary fw-3 py-3"></h5>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <div class="input-group">
                                              <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fas fa-user-alt"></i></span>
                                              </div>
                                              <input type="text" class="form-control" id="username" placeholder="Nombre y Apellido" >
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                              <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fas fa-envelope-open"></i></span>
                                              </div>
                                              <input type="email" class="form-control" id="email" placeholder="Email" >
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-group">
                                              <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fas fa-unlock-alt"></i></span>
                                              </div>
                                              <input type="password" class="form-control" id="password" placeholder="Password" >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button class="btn btn-bordered w-100 mt-3" onClick="registrarme()" >Registrarme</button>
                                    </div>
                                    <div class="col-12">
                                        <span class="d-block pt-2 mt-4 border-top">¿Ya tienes cuenta? <a href="./login.html">Iniciar sesión</a></span>
                                    </div>
                                </div>
                            <p class="form-message"></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="shape-bottom">
                <svg viewBox="0 0 1920 310" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="svg replaced-svg">
                    <title>sApp Shape</title>
                    <desc>Created with Sketch</desc>
                    <defs></defs>
                    <g id="sApp-Landing-Page" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="sApp-v1.0" transform="translate(0.000000, -554.000000)" fill="#FFFFFF">
                            <path d="M-3,551 C186.257589,757.321118 319.044414,856.322454 395.360475,848.004007 C509.834566,835.526337 561.525143,796.329212 637.731734,765.961549 C713.938325,735.593886 816.980646,681.910577 1035.72208,733.065469 C1254.46351,784.220361 1511.54925,678.92359 1539.40808,662.398665 C1567.2669,645.87374 1660.9143,591.478574 1773.19378,597.641868 C1848.04677,601.75073 1901.75645,588.357675 1934.32284,557.462704 L1934.32284,863.183395 L-3,863.183395" id="sApp-v1.0"></path>
                        </g>
                    </g>
                </svg>
            </div>
        </section>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="assets/js/jquery/jquery-3.3.1.min.js"></script>
    <script src="assets/js/bootstrap/popper.min.js"></script>
    <script src="assets/js/bootstrap/bootstrap.min.js"></script>
    <script src="assets/js/plugins/plugins.min.js"></script>
    <script src="assets/js/active.js"></script>
    <script>
    function registrarme() {
        var username    = $("#username").val();
        var email       = $("#email").val();
        var password    = $("#password").val();


        if (username == "") {
            Swal.fire({icon: 'error',title: 'Oops...',text: 'Nombre y Apellido es requerido!', }); return;
        }else  if (email == "") {
            Swal.fire({icon: 'error',title: 'Oops...',text: 'Correo es requerido!'});return
        }else  if (password == "") {
            Swal.fire({icon: 'error',title: 'Oops...',text: 'Contraseña es requerido!',}); return
        }

        var data =  {
            username : username,
            email : email,
            password : password
        }




        var headers = new Headers();
        headers.append('Authorization', 'Basic user:passwd');
        headers.append('Content-Type', 'application/json');

        fetch('http://reserva-ecologica-antisana.online/back/public/api/user/registrar', {
                method:'POST',
                headers: headers,
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(json => {

                if (  json.success ) {
                    Swal.fire({icon: 'success',title: '',text: json.success.mensaje }); 
                    setTimeout(function(){ 
                        window.location.href = 'login.html';
                    },2500);
                }
                
                if ( json.error ){
                    if ( json.error.username ){
                        Swal.fire({icon: 'error',title: 'Oops...',text: json.error.username[0], }); return;
                    }
                    if ( json.error.email ){
                        Swal.fire({icon: 'error',title: 'Oops...',text: json.error.email[0], }); return;
                    }
                    if ( json.error.password ){
                        Swal.fire({icon: 'error',title: 'Oops...',text: json.error.password[0], }); return;
                    }
                } 
            });   

        }
    </script>

</body>

</html>